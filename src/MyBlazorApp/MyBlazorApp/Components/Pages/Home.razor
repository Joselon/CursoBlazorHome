@page "/"
@using MyBlazorApp.Models
@using MyBlazorApp.Services
@inject ITareasService TareasSvc
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

<h1>Home</h1>

<hr />

<div style="background-color:grey">
    @* <Counter CurrentCount="value" OnCounterPares="OnContandorPar"></Counter> <!-- Primer ejemplo EventCallback en componente Counter-->*@

    <Counter CurrentCount="value" OnCurrentCountUpdated="OnContandorActualizado"></Counter>
</div>

<hr />

<h3>Pruebas Curso Blazor Escuela IT</h3>

<p>El valor de <strong>name</strong> es : @name <mark>(se actualiza con el evento update del componente counter a su localCount)</mark></p>
<p>...  y <strong>value</strong> es : @value <mark>(lo que le pasamos al componente counter OnParametersSet Ciclo de vida)</mark></p>

Home Button:

<button class="btn btn-primary" @onclick="RestartCount">Paga!</button>

<hr />

<Alerta Text="Ha ocurrido algún error"></Alerta>

<hr />

<h2>Lista de Tareas</h2>
<ListaDeTareas ToDos="_toDos"></ListaDeTareas>

<hr />

@code {
    private int value = 47;
    private string name = "48"; //En el componente se pone ="int.Parse(name)" 

    private void RestartCount()
    {
        name = "0"; // Solo actualiza el valor de name el primer click, luego no se actualiza más¿?
        value = 0; 
    }
    /*  <!-- Primer ejemplo EventCallback en componente Counter -->
    private void OnContandorPar()
    { 
        name = "El contador es par!"; //Al primer evento ya no actualiza más...Ciclo de vida...
        }

    */

    private void OnContandorActualizado(int newValue)
    {
        name = newValue.ToString();
        //  value = newValue; //Esto no lo debemos hacer
    }

    /* Todolist */

    private IEnumerable<ToDoTarea> _toDos = [];

    protected override async Task OnInitializedAsync()
    {
        _toDos = await TareasSvc.GetAll();
    }
}
